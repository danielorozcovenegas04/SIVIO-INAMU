@{
    Layout = "~/Views/Shared/_Layout_Login.cshtml";
}
@using SIVIO.Entidades
@model List<TBL_PERSONA>

<style>
    .jumbotron {
        padding-left: 5px !important;
        padding-right: 5px !important;
    }

    .container {
        padding-left: 5px !important;
        padding-right: 5px !important;
    }
</style>
<div class="container-fluid">
    <style>
        .buttons-excel {
            background-color: green;
            color: white;
        }

        .buttons-pdf {
            background-color: red;
            color: white;
        }

        .paginate_button {
            padding: 0px !important;
        }
        /*.paginate_button active {
            padding: 0px !important;


        }*/
    </style>
    <style>
        .pad {
            padding-bottom: 3px;
            margin-bottom: 3px;
        }

        .parsley-required {
            color: red;
            font-weight: bold;
        }

        .checkNoSpace {
            padding-left: 0px !important;
        }

        ::-webkit-input-placeholder { /* WebKit, Blink, Edge */
            color: white;
        }

        :-moz-placeholder { /* Mozilla Firefox 4 to 18 */
            color: white;
            opacity: 1;
        }

        ::-moz-placeholder { /* Mozilla Firefox 19+ */
            color: white;
            opacity: 1;
        }

        :-ms-input-placeholder { /* Internet Explorer 10-11 */
            color: white;
        }
    </style>

    <style>
        input, select, textarea {
            max-width: 100%;
            padding: 4px;
        }
    </style>
    <script src="~/Scripts/INAMU.datatables.min.js"></script>

    <!-- Campo de búsqueda -->
    <br><br><b>Digite el nombre o identificación:</b><br><br>
    <form action="BusquedaExpediente">
        <input type="text" name="palabra" value="" />
        <input type="submit" value="Buscar">
    </form>

    <br><br><br>

    <!-- Comprueba si hay resultados -->
    @{  
        int cantidad = 0;
        foreach (TBL_PERSONA expediente in Model) {
            if (expediente.VC_NOMBRE != "") {
                cantidad++;
            }
        }
    }

    @if (@Request.QueryString["palabra"] != "" & @Request.QueryString["palabra"] != null) {
        System.Diagnostics.Debug.WriteLine("esto:" + @Request.QueryString["palabra"]);
        if (cantidad > 0) {
            <div class="row" id="contenedorGrid" style="padding-top: 10px; padding-bottom: 6px; background-color: white; margin-bottom: 6px; margin-left: 0px; margin-right: 0px;                                                                                                                                                                                                                                      border: 1px solid #E3E3E3; border-radius: 4px; -webkit-box-shadow: none; box-shadow: none;">
                <div class="col-md-12">
                     <table id="tblBusquedaExpediente" class="display table-bordered" cellspacing="0" style="width: 100%">
                
                        <caption> <b>Resultados para "@Request.QueryString["palabra"]" :</b><br><br></caption>

                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Identificación</th>
                                <th>Fecha de última atención</th>
                                <th>Servicio que brindó la atención</th>
                                <th>Egreso técnico</th>
                                <th>CLAIS</th>
                            </tr>
                        </thead>

                        <tbody>
                        @foreach (TBL_PERSONA expediente in Model) {
                            <tr>
                                <td>
                                    @Html.Raw(expediente.VC_NOMBRE) @Html.Raw(expediente.VC_APELLIDO1) @Html.Raw(expediente.VC_APELLIDO2)
                                </td>
                                <td>@Html.Raw(expediente.VC_IDENTIFICACION)</td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                        }  
                        </tbody>
                    </table>
                </div>
            </div>

        } else {
        <b>No se ha encontrado ningún resultado con la palabra clave "@Request.QueryString["palabra"]"</b><br><br>
        }
        <br>
        <form action="">
            <input type="submit" value="Crear usuaria (atención en comunidad)">
        </form>
    }

</div>

